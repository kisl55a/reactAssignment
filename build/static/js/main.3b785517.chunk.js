(window.webpackJsonptemplate=window.webpackJsonptemplate||[]).push([[0],{1:function(e,t,a){e.exports={map:"Main_map__2A5Ok",mainInfo:"Main_mainInfo__HfHzs",generalGrid:"Main_generalGrid__2Aljb",registration:"Main_registration__9PmD5",gridForMenu:"Main_gridForMenu__t4NZs","post-1":"Main_post-1__20N_-","post-2":"Main_post-2__1L0in","post-3":"Main_post-3__1aiSU",da:"Main_da__192AR",searchRes:"Main_searchRes__uCSW3",searchResTaken:"Main_searchResTaken___mryC",station:"Main_station__Eh8No",stationTaken:"Main_stationTaken__3w6ty",logo:"Main_logo__Nqnmz",buttonGreen:"Main_buttonGreen__2t2go",buttonBlue:"Main_buttonBlue__2ejNs",proceedButton:"Main_proceedButton__3c4Vx",cancelButton:"Main_cancelButton__25PgW",cancelButtonMainPage:"Main_cancelButtonMainPage__doyqb",zebra:"Main_zebra__Yj0hC",infoHeader:"Main_infoHeader__28sSP",stationInfo:"Main_stationInfo__SiEFV",property:"Main_property__Mtkn0",chargingInfo:"Main_chargingInfo__3CoSJ"}},42:function(e,t,a){e.exports=a(90)},47:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),o=a.n(s),i=(a(47),a(33)),l=a(34),c=a(35),u=a(40),g=a(36),m=a(41),h=a(11),p=a(8),d=a(37),f=a.n(d),E=a(1),C=a.n(E);function v(e){return r.a.createElement("div",null,"fast"===e.type.toLowerCase()?0===e.isTaken?r.a.createElement("img",{className:C.a.station,alt:"fastCharge",src:"/images/Charging.png"}):r.a.createElement("img",{className:C.a.stationTaken,alt:"fastCharge",src:"/images/Charging.png"}):0===e.isTaken?r.a.createElement("img",{className:C.a.station,alt:"slowCharge",src:"/images/slow.png"}):r.a.createElement("img",{className:C.a.stationTaken,alt:"slowCharge",src:"/images/slow.png"}))}var _=a(7),b=a.n(_),y=function(e){return r.a.createElement("div",{className:C.a.stationInfo},r.a.createElement("h4",{className:C.a.infoHeader},e.stationName),r.a.createElement("div",null,"Status: ",1===e.isTaken?"Taken":" Free"),r.a.createElement("div",null,"Address: ",e.address),r.a.createElement("div",null,"Type: ",e.type),r.a.createElement("div",null,"Power: ",e.power," ",r.a.createElement("sup",null,"kWh")),r.a.createElement("div",null,"Price: ",e.price,r.a.createElement("sup",null,e.measure)),e.isLoggedIn?r.a.createElement("div",null,"  Identifier: ",e.UUID):r.a.createElement("div",null),r.a.createElement("div",null," ",r.a.createElement("button",{className:C.a.cancelButtonMainPage,onClick:function(){e.setCurrentStationToNull()}}," Back ")))},k=function(e){function t(){e.setStation(e.info)}return 1!==e.info.isTaken?r.a.createElement("div",{className:C.a.zebra},r.a.createElement("div",{className:C.a.searchRes,onClick:t},e.info.stationName)):r.a.createElement("div",{className:C.a.zebra},r.a.createElement("div",{className:C.a.searchResTaken,onClick:t},e.info.stationName))};function N(e){return r.a.createElement("div",null,e.isCharging?r.a.createElement("div",{className:C.a.chargingInfo},r.a.createElement("h5",{className:C.a.infoHeader}," Station UUID:",e.UUID.toUpperCase()," "),r.a.createElement("div",null,"The price:",e.currentCharge.cost," ",r.a.createElement("sup",null,"EUR")," "),r.a.createElement("div",null," Your time:",e.currentCharge.timeOfUsage," ",r.a.createElement("sup",null,"min")," "),"Your energy:",e.currentCharge.energy," ",r.a.createElement("sup",null,"kWh"),r.a.createElement("br",null),r.a.createElement("button",{className:C.a.cancelButtonMainPage,onClick:e.stopCharging}," Stop charging")):r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.startCharging(t.target.identifier.value)}},r.a.createElement("div",null,"Enter the Identifier"),r.a.createElement("div",null," ",e.noChargerNotification),r.a.createElement("input",{type:"text",name:"identifier"}),r.a.createElement("button",{type:"submit",className:C.a.buttonGreen}," Start charging")))}function w(e){return r.a.createElement("div",{className:C.a.gridForMenu},r.a.createElement("div",{className:C.a.post1},r.a.createElement("img",{className:C.a.logo,alt:"logo",src:"images/logo.png"}),r.a.createElement("br",null),!0!==e.isLoggedIn?r.a.createElement("div",null,r.a.createElement("div",null," ",e.message),r.a.createElement(h.b,{to:"/login"},r.a.createElement("button",{className:C.a.buttonGreen}," Login ")),r.a.createElement(h.b,{to:"/registration"},r.a.createElement("button",{className:C.a.buttonGreen},"Registration"))):r.a.createElement("div",null,r.a.createElement(h.b,{to:"/profile"},r.a.createElement("button",{className:C.a.buttonGreen},"Profile")),r.a.createElement("button",{className:C.a.buttonBlue,onClick:e.logout},"Logout"))),r.a.createElement("div",{id:"mainInfo",className:C.a.post2},r.a.createElement("div",{id:"infoAboutStation"},r.a.createElement("h3",null," Choose station on the map/list or search"),r.a.createElement("input",{type:"search",placeholder:"Search ",onChange:function(t){e.onSearchFilterUpdate(t.target.value)}})," ",r.a.createElement("br",null),e.currentMarker.stationName?r.a.createElement(y,Object.assign({},e.currentMarker,{setCurrentStationToNull:e.setCurrentStationToNull,isLoggedIn:e.isLoggedIn})):0===e.resultArray.length?" No results":e.resultArray.map((function(t,a){return r.a.createElement(k,{key:a,setStation:e.setStation,setCurrentStationToNull:e.setCurrentStationToNull,info:t})}))),r.a.createElement("br",null)),r.a.createElement("div",{className:C.a.post3},e.isLoggedIn?r.a.createElement(N,{startCharging:e.startCharging,noChargerNotification:e.noChargerNotification,isCharging:e.isCharging,idCharging:e.idCharging,UUID:e.UUID,currentCharge:e.currentCharge,stopCharging:e.stopCharging}):"You can start charging when you are logged in"))}function S(e){return r.a.createElement("div",{className:(C.a.generalGrid,C.a.registration)},r.a.createElement("h2",null," Login "),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.login(t.target.name.value,t.target.password.value),e.history.goBack()}},r.a.createElement("div",null,"Nickname"),r.a.createElement("input",{type:"text",name:"name"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("button",{className:C.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack()}},"Cancel"),r.a.createElement("button",{className:C.a.proceedButton,type:"submit"},"Login")))}function M(e){return r.a.createElement("div",{className:(C.a.generalGrid,C.a.registration)},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),t.target.password.value!==t.target.password1.value||(e.register(t.target.username.value,t.target.email.value,t.target.password.value),"Created"===e.message&&e.history.goBack())}},r.a.createElement("h2",null,"Registration"),r.a.createElement("div",null,"Username"),r.a.createElement("input",{type:"text",name:"username"}),r.a.createElement("div",null,"Email"),r.a.createElement("input",{type:"text",name:"email"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password1"}),r.a.createElement("br",null),r.a.createElement("button",{className:C.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack(),e.setMessageToNull()}},"Back"),r.a.createElement("button",{className:C.a.proceedButton,type:"submit"},"Register"),r.a.createElement("div",{id:"message"}," ","Incorrect username or password"===e.message?"":e.message," ")))}function I(e){return r.a.createElement("tr",null,r.a.createElement("th",null,e.UUID),r.a.createElement("th",null,e.timeOfStart.substr(0,9)),r.a.createElement("th",null," ",e.energy),r.a.createElement("th",null,e.timeOfUsage," "),r.a.createElement("th",null,e.cost," "))}function U(e){return r.a.createElement("div",null,0!==e.userHistory.length?r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Station Number"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Energy(kWt)"),r.a.createElement("th",null,"Time of usage(min)"),r.a.createElement("th",null,"Cost(EUR)")),r.a.createElement("tbody",null,e.userHistory.map((function(e,t){return r.a.createElement(I,Object.assign({key:t},e))})))):" You have no charges",r.a.createElement("button",{className:C.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack()}},"Back"),r.a.createElement("div",{id:"message",className:C.a.hidden}," ",e.message," "))}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(g.a)(t).call(this,e))).componentDidMount=function(){b.a.get("https://sleepy-everglades-43480.herokuapp.com/getData").then((function(e){a.setState({Markers:e.data}),a.setState({arr:e.data})})).catch((function(e){console.error(e)}))},a.logout=function(){a.stopCharging(),a.setState({isLoggedIn:!1,username:"",password:"",idUser:null,UUID:""})},a.login=function(e,t){b.a.get("https://sleepy-everglades-43480.herokuapp.com/signIn",{auth:{username:e,password:t}}).then((function(n){a.setState({isLoggedIn:n.data,username:e,password:t}),b.a.get("https://sleepy-everglades-43480.herokuapp.com/getUserId/".concat(e),{auth:{username:e,password:t}}).then((function(e){a.setState({idUser:e.data[0].idUser}),a.getUserHistory()})).catch((function(e){console.log(e)}))})).catch((function(e){a.setState({message:"Incorrect username or password"})}))},a.register=function(e,t,n){console.log(t,n,e),b.a.post("https://sleepy-everglades-43480.herokuapp.com/signUp",{username:e,email:t,password:n}).then((function(e){console.log(e),a.setState({message:e.data})})).catch((function(e){console.log(e)}))},a.setMessageToNull=function(){return a.setState({message:""})},a.textInputChange=function(e){a.setState({arr:a.state.Markers.filter((function(t){return t.stationName.toLowerCase().indexOf(e.toLowerCase())>=0}))}),a.setState({currentMarker:{}})},a.setCurrentStation=function(e){a.setState({currentMarker:e,center:{lat:e.lat,lng:e.lng},zoom:16})},a.setCurrentStationToNull=function(){a.setState({currentMarker:{}})},a.refreshData=function(){b.a.get("https://sleepy-everglades-43480.herokuapp.com/chargingProcess/".concat(a.state.idCharging),{auth:{username:a.state.username,password:a.state.password}}).then((function(e){a.setState({currentCharge:O({},e.data[0])})})).catch(),a.getUserHistory(),a.state.isCharging&&setTimeout(a.refreshData,6e4)},a.getUserHistory=function(){b.a.get("https://sleepy-everglades-43480.herokuapp.com/history/".concat(a.state.idUser),{auth:{username:a.state.username,password:a.state.password}}).then((function(e){return a.setState({userHistory:e.data})})).catch((function(e){return console.log(e)}))},a.stopCharging=function(){a.setState({isCharging:!1}),b.a.get("https://sleepy-everglades-43480.herokuapp.com/stopCharging/".concat(a.state.idCharging),{auth:{username:a.state.username,password:a.state.password}}).then((function(e){a.componentDidMount()})).catch((function(e){return console.log(e)}))},a.startCharging=function(e){""===e&&(e=0),b.a.get("https://sleepy-everglades-43480.herokuapp.com/startCharging/".concat(e),{auth:{username:a.state.username,password:a.state.password}}).then((function(t){!1!==t.data?(a.setState({isCharging:!0,UUID:e,idCharging:t.data.id,noChargerNotification:""}),a.refreshData(),a.componentDidMount()):a.setState({noChargerNotification:"No charger with such ID or it's taken already"})})).catch((function(e){console.error(e)}))},a._onChildClick=function(e,t){var n;a.state.Markers.forEach((function(e){e.stationName===t.text&&(n=e)})),a.setState({center:{lat:t.lat,lng:t.lng},zoom:16,currentMarker:n})},a.state={userHistory:[],message:"",isLoggedIn:!1,idUser:null,username:"",password:"",data:[],currentMarker:{},center:{lat:65.01,lng:25.49},zoom:13,Markers:[],arr:[],showSearchResults:!1,isCharging:!1,UUID:"",idCharging:"",noChargerNotification:"",currentCharge:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:C.a.generalGrid},r.a.createElement("main",null,r.a.createElement(h.a,null,r.a.createElement(p.a,{path:"/station/:id",exact:!0,render:function(t){return r.a.createElement(y,Object.assign({},t,{getInfoAboutStation:e.getInfoAboutStation}))}}),r.a.createElement(p.a,{path:"/login",exact:!0,render:function(t){return r.a.createElement(S,Object.assign({login:e.login},t,{username:e.state.username,message:e.state.message,setMessageToNull:e.setMessageToNull}))}}),r.a.createElement(p.a,{path:"/profile",exact:!0,render:function(t){return r.a.createElement(U,Object.assign({userHistory:e.state.userHistory},t))}}),r.a.createElement(p.a,{path:"/registration",exact:!0,render:function(t){return r.a.createElement(M,Object.assign({},t,{register:e.register,message:e.state.message,setMessageToNull:e.setMessageToNull}))}}),r.a.createElement(p.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(w,{logout:e.logout,message:e.state.message,currentMarker:e.state.currentMarker,isLoggedIn:e.state.isLoggedIn,onSearchFilterUpdate:e.textInputChange,showSearchResults:e.state.showSearchResults,resultArray:e.state.arr.slice(0,7),setStation:e.setCurrentStation,setCurrentStationToNull:e.setCurrentStationToNull,startCharging:e.startCharging,noChargerNotification:e.state.noChargerNotification,isCharging:e.state.isCharging,UUID:e.state.UUID,idCharging:e.state.idCharging,currentCharge:e.state.currentCharge,stopCharging:e.stopCharging})}}))),r.a.createElement("div",{className:C.a.map},r.a.createElement(f.a,{center:this.state.center,bootstrapURLKeys:{key:"AIzaSyBQc4fDzvIrxXU2Md73EjyY6oXWspFCMSY"},zoom:this.state.zoom,onChildClick:this._onChildClick},this.state.Markers.map((function(e,t){return r.a.createElement(v,{key:t,lat:e.lat,lng:e.lng,isTaken:e.isTaken,type:e.type,text:e.stationName})})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.3b785517.chunk.js.map